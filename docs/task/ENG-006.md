# ENG-006 Optimize frontend bundle size and heavy chunks

- status: completed
- priority: P1
- owner: codex
- createdAt: 2026-03-01 00:16 UTC
- updatedAt: 2026-03-01 00:21 UTC

## Summary
The frontend production bundle contains unexpectedly large JavaScript assets caused by heavy syntax-highlighting and terminal dependencies being included too early. This task optimizes chunking and loading strategy so heavy code is loaded only when needed.

## Scope
- Fix Shiki aliasing so slim language/theme bundles are actually used instead of full-bundle paths.
- Lazy-load terminal UI and runtime to keep xterm dependencies out of the main entry chunk.
- Lazy-load heavy diff/highlight UI where practical to reduce initial route payload.
- Verify results with a production build and compare generated asset sizes.

## Acceptance Criteria
- Build no longer emits the previous oversized full-language chunks as part of default app paths.
- Main entry chunk size is significantly reduced by removing eager terminal and heavy diff dependencies.
- Functionality remains intact for terminal, issue diff view, and code rendering.

## Notes
- Root-cause hypothesis: Shiki internal import path changed and existing alias logic no longer matches all full-bundle language entry points.
- Verified by production build: legacy large language chunks such as `cpp-*` and `emacs-lisp-*` are no longer emitted.
